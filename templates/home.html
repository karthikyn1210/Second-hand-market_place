{% extends "base.html" %}

{% block content %}
<!-- Modern Marketplace Header -->
<header style="background: white; border-bottom: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
  <div class="container py-3">
    <!-- Top Navigation Row -->
    <div class="row align-items-center mb-3">
      <!-- Logo -->
      <div class="col-md-2">
        <h2 style="color: #667eea; font-weight: 800; margin: 0; font-size: 1.8em;">
          ğŸª MarketHub
        </h2>
        <small style="color: #999;">Trusted Classifieds</small>
      </div>

      <!-- Search Bar -->
      <div class="col-md-6">
        <form method="GET" action="{{ url_for('listings') }}" class="d-flex">
          <input type="text" name="q" class="form-control form-control-lg" placeholder="Search items..." 
                 style="border-radius: 8px 0 0 8px; border: 2px solid #e0e0e0;">
          <button class="btn btn-primary" style="border-radius: 0 8px 8px 0; background: #667eea; border: 2px solid #667eea;">
            ğŸ”
          </button>
        </form>
      </div>

      <!-- Right Section: Wishlist, Login, Sell (language & country removed) -->
      <div class="col-md-4 d-flex align-items-center justify-content-end gap-3">
        <!-- Wishlist -->
        <a href="{{ url_for('dashboard') }}" title="Wishlist" style="font-size: 1.3em; cursor: pointer; text-decoration: none;">
          â¤ï¸ <small style="color: #666;">Wishlist</small>
        </a>

        <!-- Login Link -->
        {% if not session.get('user_id') %}
          <a href="{{ url_for('login') }}" style="text-decoration: none; color: #333; font-weight: 600;">
            ğŸ” Login
          </a>
        {% else %}
          <span style="color: #999; font-size: 0.9em;">
            Hi, {{ session.get('user_name', 'User') }}!
          </span>
        {% endif %}

        <!-- Sell Button -->
        <a href="{{ url_for('add_product') }}" class="btn btn-lg fw-bold" style="background: linear-gradient(135deg, #4169e1 0%, #ffd700 100%); color: white; border: none; border-radius: 25px; padding: 0.6rem 1.5rem;">
          âœ¨ SELL
        </a>
      </div>
    </div>
  </div>

  <!-- Category Navigation Bar -->
  <div style="background: #f8f9fa; border-top: 1px solid #e0e0e0; border-bottom: 1px solid #e0e0e0;">
    <div class="container py-2 d-flex align-items-center gap-3 overflow-auto" style="white-space: nowrap;">
      <!-- All Categories Dropdown -->
      <div class="dropdown">
        <button class="btn btn-sm btn-light" style="border: 1px solid #ddd; border-radius: 6px; white-space: nowrap;">
          ğŸ“‹ All Categories
        </button>
      </div>

      <!-- Category Links -->
      <a href="{{ url_for('listings') }}?category=Cars" class="btn btn-sm btn-light" style="white-space: nowrap;">
        ğŸš— Cars
      </a>
      <a href="{{ url_for('listings') }}?category=Bikes" class="btn btn-sm btn-light" style="white-space: nowrap;">
        ğŸï¸ Motorcycles
      </a>
      <a href="{{ url_for('listings') }}?category=Electronics" class="btn btn-sm btn-light" style="white-space: nowrap;">
        ğŸ“± Mobile Phones
      </a>
      <a href="{{ url_for('listings') }}?category=Furniture" class="btn btn-sm btn-light" style="white-space: nowrap;">
        ğŸ  Houses & Apartments
      </a>
      <a href="{{ url_for('listings') }}?category=Accessories" class="btn btn-sm btn-light" style="white-space: nowrap;">
        ğŸ›µ Scooters
      </a>
        <div class="col-6 col-sm-4 col-md-2 d-flex">
          <a href="{{ url_for('listings') }}?category=Accessories" class="text-decoration-none w-100">
            <div style="background: white; padding: 1.5rem; border-radius: 12px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); width:100%;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.08)';">
              <div style="font-size: 2.5em; margin-bottom: 0.5rem;">ğŸ›µ</div>
              <h6 style="color: #333; font-weight: 700; margin: 0;">Accessories</h6>
            </div>
          </a>
        </div>
      <a href="{{ url_for('listings') }}?category=Other" class="btn btn-sm btn-light" style="white-space: nowrap;">
        ğŸšš Commercial
      </a>
        <div class="col-6 col-sm-4 col-md-2 d-flex">
          <a href="{{ url_for('listings') }}?category=Other" class="text-decoration-none w-100">
            <div style="background: white; padding: 1.5rem; border-radius: 12px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); width:100%;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.08)';">
              <div style="font-size: 2.5em; margin-bottom: 0.5rem;">ğŸšš</div>
              <h6 style="color: #333; font-weight: 700; margin: 0;">Commercial</h6>
            </div>
          </a>
        </div>
      <a href="{{ url_for('listings') }}" class="btn btn-sm btn-light" style="white-space: nowrap;">
        ğŸ˜ï¸ For Rent
      </a>

      <!-- Date on Right -->
      <div class="ms-auto" style="white-space: nowrap; color: #666; font-weight: 600;">
        ğŸ“… 26 Nov, 2025
      </div>
    </div>
  </div>
</header>

<!-- Promotional Banner -->
<div style="background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); color: white; padding: 4rem 2rem; margin-top: 2rem; position: relative; overflow: hidden; border-radius: 12px; margin-left: 1rem; margin-right: 1rem;">
  <!-- Snowflakes Decoration -->
  <div style="position: absolute; top: 20px; left: 50px; font-size: 3em; opacity: 0.2;">â„ï¸</div>
  <div style="position: absolute; top: 80px; left: 100px; font-size: 2em; opacity: 0.15;">â„ï¸</div>
  <div style="position: absolute; bottom: 40px; right: 150px; font-size: 2.5em; opacity: 0.1;">â„ï¸</div>
  <div style="position: absolute; bottom: 60px; right: 50px; font-size: 3em; opacity: 0.2;">â„ï¸</div>

  <div class="container">
    <div class="row align-items-center">
      <!-- Left Content -->
      <div class="col-md-6">
        <!-- Winter Sale Badge -->
        <div style="display: inline-flex; align-items: center; justify-content: center; background: rgba(255, 255, 255, 0.2); border-radius: 50%; padding: 0; width: 140px; height: 140px; margin-bottom: 2rem; border: 3px solid white;">
          <div style="text-align: center;">
            <div style="font-size: 0.8em; font-weight: 600;">WINTER</div>
            <div style="font-size: 1.8em; font-weight: 800;">SALE</div>
            <div style="font-size: 0.7em;">Days</div>
          </div>
        </div>

        <!-- Banner Text -->
        <h1 style="font-size: 2.5em; font-weight: 800; margin-bottom: 1rem; line-height: 1.2;">
          â„ï¸ Warning: Your Next Post May Deliver <span style="color: #ffd700;">Winter Happiness</span>
        </h1>
        <p style="font-size: 1.1em; opacity: 0.95; margin-bottom: 2rem;">
          Discover amazing deals on thousands of items. From gadgets to vehicles, find everything you need!
        </p>
      </div>

      <!-- Right Content: Product Image & CTA -->
      <div class="col-md-6 text-center position-relative">
        <!-- Product Image -->
        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 2rem; margin-bottom: 1rem;">
          <div style="font-size: 5em; margin-bottom: 1rem;">ğŸ§</div>
          <h4 style="color: white; font-weight: 600;">Premium Wireless Earbuds</h4>
          <div style="background: white; color: #1e3a8a; padding: 0.5rem 1rem; border-radius: 6px; display: inline-block; font-weight: 800; margin-top: 1rem;">
            â‚¹1,299
          </div>
        </div>

        <!-- CTA Bubble -->
        <div style="background: #ef4444; color: white; border-radius: 50%; width: 120px; height: 120px; display: flex; align-items: center; justify-content: center; margin: 0 auto; font-weight: 800; font-size: 1.1em; text-align: center; position: absolute; right: 20px; bottom: -20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);">
          ğŸ‰ Join the Fun!
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Featured Listings Section -->
<div style="background: white; padding: 4rem 2rem; margin-top: 6rem;">
  <div class="container">
    <h2 style="color: #333; font-weight: 800; margin-bottom: 3rem; font-size: 2em;">
      âœ¨ Featured Listings
    </h2>

    <!-- Featured Products Grid (show up to 20 items) -->
    <div class="row g-4">
      {% for p in products[:5] %}
      <div class="col-md-3">
        <div class="card shadow-lg border-0" style="border-radius: 12px; overflow: hidden; transition: all 0.3s ease;">
          <div style="position: relative; height: 200px; background: #f0f0f0; overflow: hidden;">
            <img src="/{{ p.image_path | default('https://via.placeholder.com/300') }}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s;" alt="{{ p.title }}">
            <span style="position: absolute; top: 10px; right: 10px; background: #667eea; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600; font-size: 0.85em;">
              FEATURED
            </span>
          </div>
          <div class="card-body">
            <h5 class="card-title" style="font-weight: 700; color: #333; margin-bottom: 0.5rem; white-space: normal; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
              {{ p.title }}
            </h5>
            <p style="color: #999; font-size: 0.9em; margin-bottom: 1rem;">
              {{ p.category }}
            </p>
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <h4 style="color: #4169e1; font-weight: 800; margin: 0;">
                â‚¹{{ "%.0f"|format(p.price) }}
              </h4>
              <a href="{{ url_for('product_detail', pid=p.id) }}" class="btn btn-sm btn-primary" style="background: #667eea; border: none; border-radius: 8px;">
                View â†’
              </a>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- View All Button -->
    <div style="text-align: center; margin-top: 3rem;">
      <a href="{{ url_for('listings') }}" class="btn btn-lg fw-bold" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; padding: 1rem 3rem;">
        ğŸ›ï¸ View All Products
      </a>
    </div>
  </div>
</div>

<!-- Category Showcase -->
<div style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 4rem 2rem;">
  <div class="container">
    <h2 style="color: #333; font-weight: 800; margin-bottom: 3rem; text-align: center; font-size: 2em;">
      ğŸ” Browse by Category
    </h2>

    <div class="row g-3 justify-content-center align-items-stretch">
      <div class="col-6 col-sm-4 col-md-2 d-flex">
        <a href="{{ url_for('listings') }}?category=Cars" class="text-decoration-none w-100">
          <div style="background: white; padding: 1.5rem; border-radius: 12px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); cursor: pointer; width:100%;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.08)';">
            <div style="font-size: 2.5em; margin-bottom: 0.5rem;">ğŸš—</div>
            <h6 style="color: #333; font-weight: 700; margin: 0;">Cars</h6>
          </div>
        </a>
      </div>

      <div class="col-6 col-sm-4 col-md-2 d-flex">
        <a href="{{ url_for('listings') }}?category=Bikes" class="text-decoration-none w-100">
          <div style="background: white; padding: 1.5rem; border-radius: 12px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); width:100%;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.08)';">
            <div style="font-size: 2.5em; margin-bottom: 0.5rem;">ğŸï¸</div>
            <h6 style="color: #333; font-weight: 700; margin: 0;">Bikes</h6>
          </div>
        </a>
      </div>

      <div class="col-6 col-sm-4 col-md-2 d-flex">
        <a href="{{ url_for('listings') }}?category=Electronics" class="text-decoration-none w-100">
          <div style="background: white; padding: 1.5rem; border-radius: 12px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); width:100%;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.08)';">
            <div style="font-size: 2.5em; margin-bottom: 0.5rem;">ğŸ“±</div>
            <h6 style="color: #333; font-weight: 700; margin: 0;">Electronics</h6>
          </div>
        </a>
      </div>

      <div class="col-6 col-sm-4 col-md-2 d-flex">
        <a href="{{ url_for('listings') }}?category=Furniture" class="text-decoration-none w-100">
          <div style="background: white; padding: 1.5rem; border-radius: 12px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); width:100%;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.08)';">
            <div style="font-size: 2.5em; margin-bottom: 0.5rem;">ğŸ </div>
            <h6 style="color: #333; font-weight: 700; margin: 0;">Furniture</h6>
          </div>
        </a>
      </div>

      <!-- Clothing and Books categories removed per request -->
    </div>
  </div>
</div>

<!-- Call to Action Section -->
<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 4rem 2rem; text-align: center; margin-top: 2rem;">
  <h2 style="font-weight: 800; margin-bottom: 1rem; font-size: 2em;">
    Ready to Sell Something?
  </h2>
  <p style="font-size: 1.1em; margin-bottom: 2rem; opacity: 0.95;">
    Join thousands of happy sellers. List your items in seconds and reach millions of buyers!
  </p>
  <a href="{{ url_for('add_product') }}" class="btn btn-lg fw-bold" style="background: white; color: #667eea; border: none; border-radius: 25px; padding: 1rem 3rem; font-size: 1.1em;">
    ğŸ“ Start Selling Now
  </a>
</div>

<style>
  .card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.2) !important;
  }
  
  .card img:hover {
    transform: scale(1.05);
  }
</style>
{% endblock %}
